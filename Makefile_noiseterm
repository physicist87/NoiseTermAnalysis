PROGRAM         = NoiseTerm_Study 
CC              = g++
LD              = g++
CXXFLAGS        = -g -O2 -I$(ROOTSYS)/include -std=c++17
LDFLAGS         = $(LIBS) $(GLIBS) -B/usr/X11R6/lib -B/usr/lib64 
OPT             =
ROOTLIBS        = $(shell root-config --libs)
ROOTGLIBS       = $(shell root-config --glibs)

NOISETREE_INPUTS   = ./analysis/NoiseTree.C ./analysis/NoiseTree.h

LIBS            = $(ROOTLIBS)
GLIBS           = $(ROOTGLIBS) -L/usr/X11R6/lib -lXext
OBJS            = CommonTools.o NoiseTree.o NoiseTerm.o main_noiseterm.o LumiReWeight.o TextReader.o JetVeto.o Utilities.o JetCorrectorParameters.o SimpleJetCorrector.o FactorizedJetCorrector.o SimpleJetCorrectionUncertainty.o JetCorrectionUncertainty.o JetResolutionObject.o
INPUTS	   	= $(NOISETREE_INPUTS) NoiseTerm.hpp NoiseTerm.cpp main_noiseterm.cpp ./LumiReWeighting.h ./LumiReWeighting.cc ./TextReader/TextReader.hpp ./TextReader/TextReader.cpp ./jetveto/JetVeto.hpp ./jetveto/JetVeto.cpp ./CondFormats/JetMETObjects/src/Utilities.cc CondFormats/JetMETObjects/interface/JetCorrectorParameters.h ./CondFormats/JetMETObjects/src/JetCorrectorParameters.cc CondFormats/JetMETObjects/src/SimpleJetCorrector.cc  CondFormats/JetMETObjects/src/FactorizedJetCorrector.cc CondFormats/JetMETObjects/src/SimpleJetCorrectionUncertainty.cc CondFormats/JetMETObjects/src/JetCorrectionUncertainty.cc CondFormats/JetMETObjects/src/JetResolutionObject.cc

all: $(OBJS) 															
	$(CC) $(OPT) $(LDFLAGS) -o $(PROGRAM) -g $(OBJS) $(LIBS)

main_noiseterm.o: main_noiseterm.cpp $(INPUTS) 
	$(CC) $(CXXFLAGS) -c main_noiseterm.cpp

NoiseTree.o: $(NOISETREE_INPUTS)				
	$(CC) $(CXXFLAGS) -c ./analysis/NoiseTree.C

NoiseTerm.o: NoiseTerm.hpp NoiseTerm.cpp
	$(CC) $(CXXFLAGS) -c ./NoiseTerm.cpp

CommonTools.o: CommonTools.hpp CommonTools.cpp
	$(CC) $(CXXFLAGS) -c CommonTools.cpp

LumiReWeight.o: ./LumiReWeighting.h
	$(CC) $(CXXFLAGS) -c ./LumiReWeighting.cc -o LumiReWeight.o

TextReader.o: ./TextReader/TextReader.hpp ./TextReader/TextReader.cpp
	$(CC) $(CXXFLAGS) -c TextReader/TextReader.cpp

JetVeto.o: ./jetveto/JetVeto.hpp ./jetveto/JetVeto.cpp
	$(CC) $(CXXFLAGS) -c ./jetveto/JetVeto.cpp 

Utilities.o:  CondFormats/JetMETObjects/src/Utilities.cc
	$(CC) $(CXXFLAGS) -c CondFormats/JetMETObjects/src/Utilities.cc 

JetCorrectorParameters.o: CondFormats/JetMETObjects/interface/JetCorrectorParameters.h CondFormats/JetMETObjects/src/JetCorrectorParameters.cc
	$(CC) $(CXXFLAGS) -c CondFormats/JetMETObjects/src/JetCorrectorParameters.cc

SimpleJetCorrector.o:  CondFormats/JetMETObjects/src/SimpleJetCorrector.cc
	$(CC) $(CXXFLAGS) -c CondFormats/JetMETObjects/src/SimpleJetCorrector.cc 

FactorizedJetCorrector.o:  CondFormats/JetMETObjects/src/FactorizedJetCorrector.cc
	$(CC) $(CXXFLAGS) -c CondFormats/JetMETObjects/src/FactorizedJetCorrector.cc 

SimpleJetCorrectionUncertainty.o:  CondFormats/JetMETObjects/src/SimpleJetCorrectionUncertainty.cc
	$(CC) $(CXXFLAGS) -c CondFormats/JetMETObjects/src/SimpleJetCorrectionUncertainty.cc 

JetCorrectionUncertainty.o:  CondFormats/JetMETObjects/src/JetCorrectionUncertainty.cc
	$(CC) $(CXXFLAGS) -c CondFormats/JetMETObjects/src/JetCorrectionUncertainty.cc 

JetResolutionObject.o:  CondFormats/JetMETObjects/src/JetResolutionObject.cc
	$(CC) $(CXXFLAGS) -c CondFormats/JetMETObjects/src/JetResolutionObject.cc 
 
clean:
	-rm -f *~ $(OBJS) core core.*	
	-rm -rf ti_files
	-rm -f $(PROGRAM)
	-rm -f *~;

distclean:						
	-rm -f *~ $(PROGRAM) $(OBJS)
	-rm -rf ti_files

run: $(PROGRAM) $(OBJS)	
	make all
	./$(PROGRAM) 1

